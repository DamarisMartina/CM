/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 18-may.-2023 06:20:51 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;

/* Drop Tables */

DROP TABLE IF EXISTS `ESPECIALIDAD` CASCADE
;

DROP TABLE IF EXISTS `HISTORIA_MEDICA` CASCADE
;

DROP TABLE IF EXISTS `PACIENTE` CASCADE
;

DROP TABLE IF EXISTS `PERSONAL` CASCADE
;

/* Create Tables */

CREATE TABLE `ESPECIALIDAD`
(
	`COD_ESPECIALIDAD` VARCHAR(15) NOT NULL,
	`NOMBRE_ESPECIALIDAD` VARCHAR(20) NOT NULL,
	`DETALLE_SERVICIO` VARCHAR(50) NOT NULL,
	`ESTADO_SERVICIO` VARCHAR(30) NULL,
	CONSTRAINT `COD_ESPECIALIDAD` PRIMARY KEY (`COD_ESPECIALIDAD` ASC)
)

;

CREATE TABLE `HISTORIA_MEDICA`
(
	`COD_HISTORIA` VARCHAR(50) NOT NULL,
	`CI` VARCHAR(15) NULL,
	`COD_DOCTOR` VARCHAR(50) NOT NULL,
	`FECHA_HISTORIA` DATE NOT NULL,
	`COD_ESPECIALIDAD` VARCHAR(15) NULL,
	`REF_DIAGNOSTICO` VARCHAR(500) NOT NULL,
	`REF_TRATAMIENTO` VARCHAR(500) NOT NULL,
	`RECETA_MEDICA` VARCHAR(500) NULL,
	`ESTADO_SERVICIO` VARCHAR(30) NULL,
	CONSTRAINT `PK_HISTORIA_MEDICA` PRIMARY KEY (`COD_HISTORIA` ASC)
)

;

CREATE TABLE `PACIENTE`
(
	`COD_PACIENTE` VARCHAR(50) NOT NULL,
	`NOMBRE_PACIENTE` VARCHAR(35) NULL,
	`AP_PACIENTE` CHAR(35) NULL,
	`AM_PACIENTE` CHAR(35) NULL,
	`FNACIMIENTO_PACIENTE` VARCHAR(20) NULL,
	`DIR_PACIENTE` VARCHAR(50) NULL,
	`CEL_PACIENTE` VARCHAR(15) NULL,
	`GÉNERO_PACIENTE` CHAR(1) NULL,
	`CI_PACIENTE` VARCHAR(15) NOT NULL,
	CONSTRAINT `CI_PACIENTE` PRIMARY KEY (`COD_PACIENTE` ASC)
)

;

CREATE TABLE `PERSONAL`
(
	`COD_PERSONAL` VARCHAR(15) NOT NULL,
	`NOMBRE_PERSONAL` VARCHAR(50) NOT NULL,
	`AP_PERSONAL` VARCHAR(50) NULL,
	`AM_PERSONAL` VARCHAR(50) NOT NULL,
	`CEL_PERSONAL` INT NOT NULL,
	`DIR_PERSONAL` VARCHAR(50) NOT NULL,
	`FNACIMIENTO_PERSONAL` DATE NOT NULL,
	`GÉNERO_PERSONAL` CHAR(30) NULL,
	`ESPECIALIDAD` VARCHAR(15) NOT NULL,
	`COD_SERVICIO` INT NULL,
	`CARGO_PERSONAL` VARCHAR(20) NOT NULL,
	CONSTRAINT `COD_PERSONAL` PRIMARY KEY (`COD_PERSONAL` ASC)
)

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `ESPECIALIDAD` 
 ADD INDEX `IXFK_ESPECIALIDAD_HISTORIA_MEDICA` (`COD_ESPECIALIDAD` ASC)
;

ALTER TABLE `PACIENTE` 
 ADD INDEX `IXFK_PACIENTE_HISTORIA_MEDICA` (`CI_PACIENTE` ASC)
;

ALTER TABLE `PERSONAL` 
 ADD INDEX `IXFK_PERSONAL_ESPECIALIDAD` (`ESPECIALIDAD` ASC)
;

ALTER TABLE `PERSONAL` 
 ADD INDEX `IXFK_PERSONAL_HISTORIA_MEDICA` (`COD_PERSONAL` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `ESPECIALIDAD` 
 ADD CONSTRAINT `FK_ESPECIALIDAD_HISTORIA_MEDICA`
	FOREIGN KEY (`COD_ESPECIALIDAD`) REFERENCES `HISTORIA_MEDICA` (`COD_HISTORIA`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `PACIENTE` 
 ADD CONSTRAINT `FK_PACIENTE_HISTORIA_MEDICA`
	FOREIGN KEY (`CI_PACIENTE`) REFERENCES `HISTORIA_MEDICA` (`COD_HISTORIA`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `PERSONAL` 
 ADD CONSTRAINT `FK_PERSONAL_ESPECIALIDAD`
	FOREIGN KEY (`ESPECIALIDAD`) REFERENCES `ESPECIALIDAD` (`COD_ESPECIALIDAD`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `PERSONAL` 
 ADD CONSTRAINT `FK_PERSONAL_HISTORIA_MEDICA`
	FOREIGN KEY (`COD_PERSONAL`) REFERENCES `HISTORIA_MEDICA` (`COD_HISTORIA`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1 
;
